<!DOCTYPE html><html><head><meta charset='utf-8'><title>Regression ONNX Demo</title></head>
<body><h2>Diabetes Regression (PyTorch → ONNX → onnxruntime-web)</h2>
<div id="form"></div><p><button id="predict">Predict</button></p><pre id="out"></pre>
<script src="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js"></script>
<script>
async function loadMeta(){const r=await fetch('reg_meta.json'); return await r.json();}
function buildForm(names){const f=document.getElementById('form');names.forEach(n=>{const d=document.createElement('div');d.innerHTML=`<label>${n}: <input type='number' step='any' id='f_${n}'></label>`;f.appendChild(d);});}
function standardize(x,m,s){return x.map((v,i)=>(v-m[i])/s[i]);}
function invert_y(z,my,sy){return z*sy+my;}
(async()=>{
  const meta=await loadMeta(); buildForm(meta.feature_names);
  const sess=await ort.InferenceSession.create('reg_model.onnx');
  document.getElementById('predict').onclick=async ()=>{
    const x=meta.feature_names.map(n=>parseFloat(document.getElementById('f_'+n).value||0));
    const xs=standardize(x, meta.x_mean, meta.x_scale);
    const input=new ort.Tensor('float32', new Float32Array(xs), [1, xs.length]);
    const out=await sess.run({input}); const yhat_std=out.output.data[0];
    const yhat=invert_y(yhat_std, meta.y_mean, meta.y_scale);
    document.getElementById('out').textContent="Predicted target: "+yhat.toFixed(2);
  };
})();
</script></body></html>